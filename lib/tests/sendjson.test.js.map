{"version":3,"file":"sendjson.test.js","sourceRoot":"","sources":["../../src/tests/sendjson.test.ts"],"names":[],"mappings":";;;AAAA,iDAA6B;AAC7B,2DAA8B;AAC9B,IAAM,SAAS,GAAG,IAAI,eAAM,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,MAAA,EAAE,CAAC,CAAC;AAC5E,IAAM,UAAU,GAAG,IAAI,eAAM,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,MAAA,EAAE,CAAC,CAAC;AAE9E,IAAI,CAAC,WAAW,EAAE;;;;;gBAChB,SAAS,CAAC,SAAS,EAAE,CAAC;gBACR,qBAAM,SAAS,CAAC,QAAQ,CAAC,SAAS,EAAE,EAAA;;gBAA5C,KAAK,GAAG,SAAoC;gBAClD,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBACV,qBAAM,UAAU,CAAC,QAAQ,CAAC,SAAS,EAAE,EAAA;;gBAA9C,MAAM,GAAG,SAAqC;gBACpD,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBAEzB,SAAS,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC,CAAC;gBACzB,qBAAM,UAAU,CAAC,MAAM,CAAC,SAAS,EAAE,EAAA;;gBAAzC,GAAG,GAAG,SAAmC;gBAC/C,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAE9B,IAAI,GAAoB,GAAG,CAAC,IAAW,CAAC;gBAC9C,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC,CAAC;gBAEvC,UAAU,CAAC,MAAM,EAAE,CAAC;gBACpB,SAAS,CAAC,MAAM,EAAE,CAAC;;;;KACpB,CAAC,CAAC","sourcesContent":["import * as wrtc from \"wrtc\";\nimport WebRTC from \"../index\";\nconst peerOffer = new WebRTC({ disable_stun: true, nodeId: \"offer\", wrtc });\nconst peerAnswer = new WebRTC({ disable_stun: true, nodeId: \"answer\", wrtc });\n\ntest(\"send json\", async () => {\n  peerOffer.makeOffer();\n  const offer = await peerOffer.onSignal.asPromise();\n  peerAnswer.setSdp(offer);\n  const answer = await peerAnswer.onSignal.asPromise();\n  peerOffer.setSdp(answer);\n\n  peerOffer.sendJson({ msg: \"hello\" });\n  const msg = await peerAnswer.onData.asPromise();\n  expect(msg.dataType).toBe(\"object\");\n\n  const data: { msg: string } = msg.data as any;\n  expect(data).toEqual({ msg: \"hello\" });\n\n  peerAnswer.hangUp();\n  peerOffer.hangUp();\n});\n"]}