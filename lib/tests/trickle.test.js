"use strict";

var _index = _interopRequireDefault(require("../index"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var peerOffer = new _index.default({
  nodeId: "offer",
  trickle: true
});
var peerAnswer = new _index.default({
  nodeId: "answer",
  trickle: true
});
test("trickle", function () {
  peerOffer.makeOffer();

  peerOffer.signal = function (sdp) {
    peerAnswer.setSdp(sdp);
  };

  peerAnswer.signal = function (sdp) {
    peerOffer.setSdp(sdp);
  };

  peerOffer.connect = function () {
    peerOffer.onData.subscribe(function (raw) {
      expect(raw.data).toBe("answer");
    });
    peerOffer.send("offer");
  };

  peerAnswer.connect = function () {
    peerAnswer.onData.subscribe(function (raw) {
      expect(raw.data).toBe("offer");
    });
    peerAnswer.send("answer");
  };
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0cy90cmlja2xlLnRlc3QudHMiXSwibmFtZXMiOlsicGVlck9mZmVyIiwiV2ViUlRDIiwibm9kZUlkIiwidHJpY2tsZSIsInBlZXJBbnN3ZXIiLCJ0ZXN0IiwibWFrZU9mZmVyIiwic2lnbmFsIiwic2RwIiwic2V0U2RwIiwiY29ubmVjdCIsIm9uRGF0YSIsInN1YnNjcmliZSIsInJhdyIsImV4cGVjdCIsImRhdGEiLCJ0b0JlIiwic2VuZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQUNBLElBQU1BLFNBQVMsR0FBRyxJQUFJQyxjQUFKLENBQVc7QUFBRUMsRUFBQUEsTUFBTSxFQUFFLE9BQVY7QUFBbUJDLEVBQUFBLE9BQU8sRUFBRTtBQUE1QixDQUFYLENBQWxCO0FBQ0EsSUFBTUMsVUFBVSxHQUFHLElBQUlILGNBQUosQ0FBVztBQUFFQyxFQUFBQSxNQUFNLEVBQUUsUUFBVjtBQUFvQkMsRUFBQUEsT0FBTyxFQUFFO0FBQTdCLENBQVgsQ0FBbkI7QUFFQUUsSUFBSSxDQUFDLFNBQUQsRUFBWSxZQUFNO0FBQ3BCTCxFQUFBQSxTQUFTLENBQUNNLFNBQVY7O0FBQ0FOLEVBQUFBLFNBQVMsQ0FBQ08sTUFBVixHQUFtQixVQUFDQyxHQUFELEVBQWM7QUFDL0JKLElBQUFBLFVBQVUsQ0FBQ0ssTUFBWCxDQUFrQkQsR0FBbEI7QUFDRCxHQUZEOztBQUdBSixFQUFBQSxVQUFVLENBQUNHLE1BQVgsR0FBb0IsVUFBQ0MsR0FBRCxFQUFjO0FBQ2hDUixJQUFBQSxTQUFTLENBQUNTLE1BQVYsQ0FBaUJELEdBQWpCO0FBQ0QsR0FGRDs7QUFJQVIsRUFBQUEsU0FBUyxDQUFDVSxPQUFWLEdBQW9CLFlBQU07QUFDeEJWLElBQUFBLFNBQVMsQ0FBQ1csTUFBVixDQUFpQkMsU0FBakIsQ0FBMkIsVUFBQUMsR0FBRyxFQUFJO0FBQ2hDQyxNQUFBQSxNQUFNLENBQUNELEdBQUcsQ0FBQ0UsSUFBTCxDQUFOLENBQWlCQyxJQUFqQixDQUFzQixRQUF0QjtBQUNELEtBRkQ7QUFHQWhCLElBQUFBLFNBQVMsQ0FBQ2lCLElBQVYsQ0FBZSxPQUFmO0FBQ0QsR0FMRDs7QUFPQWIsRUFBQUEsVUFBVSxDQUFDTSxPQUFYLEdBQXFCLFlBQU07QUFDekJOLElBQUFBLFVBQVUsQ0FBQ08sTUFBWCxDQUFrQkMsU0FBbEIsQ0FBNEIsVUFBQUMsR0FBRyxFQUFJO0FBQ2pDQyxNQUFBQSxNQUFNLENBQUNELEdBQUcsQ0FBQ0UsSUFBTCxDQUFOLENBQWlCQyxJQUFqQixDQUFzQixPQUF0QjtBQUNELEtBRkQ7QUFHQVosSUFBQUEsVUFBVSxDQUFDYSxJQUFYLENBQWdCLFFBQWhCO0FBQ0QsR0FMRDtBQU1ELENBdEJHLENBQUoiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgV2ViUlRDIGZyb20gXCIuLi9pbmRleFwiO1xuY29uc3QgcGVlck9mZmVyID0gbmV3IFdlYlJUQyh7IG5vZGVJZDogXCJvZmZlclwiLCB0cmlja2xlOiB0cnVlIH0pO1xuY29uc3QgcGVlckFuc3dlciA9IG5ldyBXZWJSVEMoeyBub2RlSWQ6IFwiYW5zd2VyXCIsIHRyaWNrbGU6IHRydWUgfSk7XG5cbnRlc3QoXCJ0cmlja2xlXCIsICgpID0+IHtcbiAgcGVlck9mZmVyLm1ha2VPZmZlcigpO1xuICBwZWVyT2ZmZXIuc2lnbmFsID0gKHNkcDogYW55KSA9PiB7XG4gICAgcGVlckFuc3dlci5zZXRTZHAoc2RwKTtcbiAgfTtcbiAgcGVlckFuc3dlci5zaWduYWwgPSAoc2RwOiBhbnkpID0+IHtcbiAgICBwZWVyT2ZmZXIuc2V0U2RwKHNkcCk7XG4gIH07XG5cbiAgcGVlck9mZmVyLmNvbm5lY3QgPSAoKSA9PiB7XG4gICAgcGVlck9mZmVyLm9uRGF0YS5zdWJzY3JpYmUocmF3ID0+IHtcbiAgICAgIGV4cGVjdChyYXcuZGF0YSkudG9CZShcImFuc3dlclwiKTtcbiAgICB9KTtcbiAgICBwZWVyT2ZmZXIuc2VuZChcIm9mZmVyXCIpO1xuICB9O1xuXG4gIHBlZXJBbnN3ZXIuY29ubmVjdCA9ICgpID0+IHtcbiAgICBwZWVyQW5zd2VyLm9uRGF0YS5zdWJzY3JpYmUocmF3ID0+IHtcbiAgICAgIGV4cGVjdChyYXcuZGF0YSkudG9CZShcIm9mZmVyXCIpO1xuICAgIH0pO1xuICAgIHBlZXJBbnN3ZXIuc2VuZChcImFuc3dlclwiKTtcbiAgfTtcbn0pO1xuIl19