"use strict";

var _index = _interopRequireDefault(require("../index"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var peerOffer = new _index["default"]({
  nodeId: "offer",
  trickle: true
});
var peerAnswer = new _index["default"]({
  nodeId: "answer",
  trickle: true
});
test("trickle", function () {
  peerOffer.makeOffer();
  peerOffer.onSignal.once(function (sdp) {
    peerAnswer.setSdp(sdp);
  });
  peerAnswer.onSignal.once(function (sdp) {
    peerOffer.setSdp(sdp);
  });
  peerOffer.onConnect.once(function () {
    peerOffer.onData.subscribe(function (raw) {
      expect(raw.data).toBe("answer");
    });
    peerOffer.send("offer");
  });
  peerAnswer.onConnect.once(function () {
    peerAnswer.onData.subscribe(function (raw) {
      expect(raw.data).toBe("offer");
    });
    peerAnswer.send("answer");
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0cy90cmlja2xlLnRlc3QudHMiXSwibmFtZXMiOlsicGVlck9mZmVyIiwiV2ViUlRDIiwibm9kZUlkIiwidHJpY2tsZSIsInBlZXJBbnN3ZXIiLCJ0ZXN0IiwibWFrZU9mZmVyIiwib25TaWduYWwiLCJvbmNlIiwic2RwIiwic2V0U2RwIiwib25Db25uZWN0Iiwib25EYXRhIiwic3Vic2NyaWJlIiwicmF3IiwiZXhwZWN0IiwiZGF0YSIsInRvQmUiLCJzZW5kIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBQ0EsSUFBTUEsU0FBUyxHQUFHLElBQUlDLGlCQUFKLENBQVc7QUFBRUMsRUFBQUEsTUFBTSxFQUFFLE9BQVY7QUFBbUJDLEVBQUFBLE9BQU8sRUFBRTtBQUE1QixDQUFYLENBQWxCO0FBQ0EsSUFBTUMsVUFBVSxHQUFHLElBQUlILGlCQUFKLENBQVc7QUFBRUMsRUFBQUEsTUFBTSxFQUFFLFFBQVY7QUFBb0JDLEVBQUFBLE9BQU8sRUFBRTtBQUE3QixDQUFYLENBQW5CO0FBRUFFLElBQUksQ0FBQyxTQUFELEVBQVksWUFBTTtBQUNwQkwsRUFBQUEsU0FBUyxDQUFDTSxTQUFWO0FBQ0FOLEVBQUFBLFNBQVMsQ0FBQ08sUUFBVixDQUFtQkMsSUFBbkIsQ0FBd0IsVUFBQ0MsR0FBRCxFQUFjO0FBQ3BDTCxJQUFBQSxVQUFVLENBQUNNLE1BQVgsQ0FBa0JELEdBQWxCO0FBQ0QsR0FGRDtBQUdBTCxFQUFBQSxVQUFVLENBQUNHLFFBQVgsQ0FBb0JDLElBQXBCLENBQXlCLFVBQUNDLEdBQUQsRUFBYztBQUNyQ1QsSUFBQUEsU0FBUyxDQUFDVSxNQUFWLENBQWlCRCxHQUFqQjtBQUNELEdBRkQ7QUFJQVQsRUFBQUEsU0FBUyxDQUFDVyxTQUFWLENBQW9CSCxJQUFwQixDQUF5QixZQUFNO0FBQzdCUixJQUFBQSxTQUFTLENBQUNZLE1BQVYsQ0FBaUJDLFNBQWpCLENBQTJCLFVBQUFDLEdBQUcsRUFBSTtBQUNoQ0MsTUFBQUEsTUFBTSxDQUFDRCxHQUFHLENBQUNFLElBQUwsQ0FBTixDQUFpQkMsSUFBakIsQ0FBc0IsUUFBdEI7QUFDRCxLQUZEO0FBR0FqQixJQUFBQSxTQUFTLENBQUNrQixJQUFWLENBQWUsT0FBZjtBQUNELEdBTEQ7QUFPQWQsRUFBQUEsVUFBVSxDQUFDTyxTQUFYLENBQXFCSCxJQUFyQixDQUEwQixZQUFNO0FBQzlCSixJQUFBQSxVQUFVLENBQUNRLE1BQVgsQ0FBa0JDLFNBQWxCLENBQTRCLFVBQUFDLEdBQUcsRUFBSTtBQUNqQ0MsTUFBQUEsTUFBTSxDQUFDRCxHQUFHLENBQUNFLElBQUwsQ0FBTixDQUFpQkMsSUFBakIsQ0FBc0IsT0FBdEI7QUFDRCxLQUZEO0FBR0FiLElBQUFBLFVBQVUsQ0FBQ2MsSUFBWCxDQUFnQixRQUFoQjtBQUNELEdBTEQ7QUFNRCxDQXRCRyxDQUFKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFdlYlJUQyBmcm9tIFwiLi4vaW5kZXhcIjtcbmNvbnN0IHBlZXJPZmZlciA9IG5ldyBXZWJSVEMoeyBub2RlSWQ6IFwib2ZmZXJcIiwgdHJpY2tsZTogdHJ1ZSB9KTtcbmNvbnN0IHBlZXJBbnN3ZXIgPSBuZXcgV2ViUlRDKHsgbm9kZUlkOiBcImFuc3dlclwiLCB0cmlja2xlOiB0cnVlIH0pO1xuXG50ZXN0KFwidHJpY2tsZVwiLCAoKSA9PiB7XG4gIHBlZXJPZmZlci5tYWtlT2ZmZXIoKTtcbiAgcGVlck9mZmVyLm9uU2lnbmFsLm9uY2UoKHNkcDogYW55KSA9PiB7XG4gICAgcGVlckFuc3dlci5zZXRTZHAoc2RwKTtcbiAgfSk7XG4gIHBlZXJBbnN3ZXIub25TaWduYWwub25jZSgoc2RwOiBhbnkpID0+IHtcbiAgICBwZWVyT2ZmZXIuc2V0U2RwKHNkcCk7XG4gIH0pO1xuXG4gIHBlZXJPZmZlci5vbkNvbm5lY3Qub25jZSgoKSA9PiB7XG4gICAgcGVlck9mZmVyLm9uRGF0YS5zdWJzY3JpYmUocmF3ID0+IHtcbiAgICAgIGV4cGVjdChyYXcuZGF0YSkudG9CZShcImFuc3dlclwiKTtcbiAgICB9KTtcbiAgICBwZWVyT2ZmZXIuc2VuZChcIm9mZmVyXCIpO1xuICB9KTtcblxuICBwZWVyQW5zd2VyLm9uQ29ubmVjdC5vbmNlKCgpID0+IHtcbiAgICBwZWVyQW5zd2VyLm9uRGF0YS5zdWJzY3JpYmUocmF3ID0+IHtcbiAgICAgIGV4cGVjdChyYXcuZGF0YSkudG9CZShcIm9mZmVyXCIpO1xuICAgIH0pO1xuICAgIHBlZXJBbnN3ZXIuc2VuZChcImFuc3dlclwiKTtcbiAgfSk7XG59KTtcbiJdfQ==