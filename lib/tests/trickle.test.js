"use strict";

var _index = _interopRequireDefault(require("../index"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var peerOffer = new _index.default({
  nodeId: "offer",
  trickle: true
});
var peerAnswer = new _index.default({
  nodeId: "answer",
  trickle: true
});
test("trickle", function () {
  peerOffer.makeOffer();
  peerOffer.onSignal.once(function (sdp) {
    peerAnswer.setSdp(sdp);
  });
  peerAnswer.onSignal.once(function (sdp) {
    peerOffer.setSdp(sdp);
  });
  peerOffer.onConnect.once(function () {
    peerOffer.onData.subscribe(function (raw) {
      expect(raw.data).toBe("answer");
    });
    peerOffer.send("offer");
  });
  peerAnswer.onConnect.once(function () {
    peerAnswer.onData.subscribe(function (raw) {
      expect(raw.data).toBe("offer");
    });
    peerAnswer.send("answer");
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0cy90cmlja2xlLnRlc3QudHMiXSwibmFtZXMiOlsicGVlck9mZmVyIiwiV2ViUlRDIiwibm9kZUlkIiwidHJpY2tsZSIsInBlZXJBbnN3ZXIiLCJ0ZXN0IiwibWFrZU9mZmVyIiwib25TaWduYWwiLCJvbmNlIiwic2RwIiwic2V0U2RwIiwib25Db25uZWN0Iiwib25EYXRhIiwic3Vic2NyaWJlIiwicmF3IiwiZXhwZWN0IiwiZGF0YSIsInRvQmUiLCJzZW5kIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBQ0EsSUFBTUEsU0FBUyxHQUFHLElBQUlDLGNBQUosQ0FBVztBQUFFQyxFQUFBQSxNQUFNLEVBQUUsT0FBVjtBQUFtQkMsRUFBQUEsT0FBTyxFQUFFO0FBQTVCLENBQVgsQ0FBbEI7QUFDQSxJQUFNQyxVQUFVLEdBQUcsSUFBSUgsY0FBSixDQUFXO0FBQUVDLEVBQUFBLE1BQU0sRUFBRSxRQUFWO0FBQW9CQyxFQUFBQSxPQUFPLEVBQUU7QUFBN0IsQ0FBWCxDQUFuQjtBQUVBRSxJQUFJLENBQUMsU0FBRCxFQUFZLFlBQU07QUFDcEJMLEVBQUFBLFNBQVMsQ0FBQ00sU0FBVjtBQUNBTixFQUFBQSxTQUFTLENBQUNPLFFBQVYsQ0FBbUJDLElBQW5CLENBQXdCLFVBQUNDLEdBQUQsRUFBYztBQUNwQ0wsSUFBQUEsVUFBVSxDQUFDTSxNQUFYLENBQWtCRCxHQUFsQjtBQUNELEdBRkQ7QUFHQUwsRUFBQUEsVUFBVSxDQUFDRyxRQUFYLENBQW9CQyxJQUFwQixDQUF5QixVQUFDQyxHQUFELEVBQWM7QUFDckNULElBQUFBLFNBQVMsQ0FBQ1UsTUFBVixDQUFpQkQsR0FBakI7QUFDRCxHQUZEO0FBSUFULEVBQUFBLFNBQVMsQ0FBQ1csU0FBVixDQUFvQkgsSUFBcEIsQ0FBeUIsWUFBTTtBQUM3QlIsSUFBQUEsU0FBUyxDQUFDWSxNQUFWLENBQWlCQyxTQUFqQixDQUEyQixVQUFBQyxHQUFHLEVBQUk7QUFDaENDLE1BQUFBLE1BQU0sQ0FBQ0QsR0FBRyxDQUFDRSxJQUFMLENBQU4sQ0FBaUJDLElBQWpCLENBQXNCLFFBQXRCO0FBQ0QsS0FGRDtBQUdBakIsSUFBQUEsU0FBUyxDQUFDa0IsSUFBVixDQUFlLE9BQWY7QUFDRCxHQUxEO0FBT0FkLEVBQUFBLFVBQVUsQ0FBQ08sU0FBWCxDQUFxQkgsSUFBckIsQ0FBMEIsWUFBTTtBQUM5QkosSUFBQUEsVUFBVSxDQUFDUSxNQUFYLENBQWtCQyxTQUFsQixDQUE0QixVQUFBQyxHQUFHLEVBQUk7QUFDakNDLE1BQUFBLE1BQU0sQ0FBQ0QsR0FBRyxDQUFDRSxJQUFMLENBQU4sQ0FBaUJDLElBQWpCLENBQXNCLE9BQXRCO0FBQ0QsS0FGRDtBQUdBYixJQUFBQSxVQUFVLENBQUNjLElBQVgsQ0FBZ0IsUUFBaEI7QUFDRCxHQUxEO0FBTUQsQ0F0QkcsQ0FBSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBXZWJSVEMgZnJvbSBcIi4uL2luZGV4XCI7XG5jb25zdCBwZWVyT2ZmZXIgPSBuZXcgV2ViUlRDKHsgbm9kZUlkOiBcIm9mZmVyXCIsIHRyaWNrbGU6IHRydWUgfSk7XG5jb25zdCBwZWVyQW5zd2VyID0gbmV3IFdlYlJUQyh7IG5vZGVJZDogXCJhbnN3ZXJcIiwgdHJpY2tsZTogdHJ1ZSB9KTtcblxudGVzdChcInRyaWNrbGVcIiwgKCkgPT4ge1xuICBwZWVyT2ZmZXIubWFrZU9mZmVyKCk7XG4gIHBlZXJPZmZlci5vblNpZ25hbC5vbmNlKChzZHA6IGFueSkgPT4ge1xuICAgIHBlZXJBbnN3ZXIuc2V0U2RwKHNkcCk7XG4gIH0pO1xuICBwZWVyQW5zd2VyLm9uU2lnbmFsLm9uY2UoKHNkcDogYW55KSA9PiB7XG4gICAgcGVlck9mZmVyLnNldFNkcChzZHApO1xuICB9KTtcblxuICBwZWVyT2ZmZXIub25Db25uZWN0Lm9uY2UoKCkgPT4ge1xuICAgIHBlZXJPZmZlci5vbkRhdGEuc3Vic2NyaWJlKHJhdyA9PiB7XG4gICAgICBleHBlY3QocmF3LmRhdGEpLnRvQmUoXCJhbnN3ZXJcIik7XG4gICAgfSk7XG4gICAgcGVlck9mZmVyLnNlbmQoXCJvZmZlclwiKTtcbiAgfSk7XG5cbiAgcGVlckFuc3dlci5vbkNvbm5lY3Qub25jZSgoKSA9PiB7XG4gICAgcGVlckFuc3dlci5vbkRhdGEuc3Vic2NyaWJlKHJhdyA9PiB7XG4gICAgICBleHBlY3QocmF3LmRhdGEpLnRvQmUoXCJvZmZlclwiKTtcbiAgICB9KTtcbiAgICBwZWVyQW5zd2VyLnNlbmQoXCJhbnN3ZXJcIik7XG4gIH0pO1xufSk7XG4iXX0=