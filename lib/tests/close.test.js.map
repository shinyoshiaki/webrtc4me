{"version":3,"file":"close.test.js","sourceRoot":"","sources":["../../src/tests/close.test.ts"],"names":[],"mappings":";;;AAAA,iDAA6B;AAE7B,iDAAwB;AAExB,IAAI,CAAC,OAAO,EAAE;;;;;gBACN,SAAS,GAAG,IAAI,WAAM,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,MAAA,EAAE,CAAC,CAAC;gBACtE,UAAU,GAAG,IAAI,WAAM,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,MAAA,EAAE,CAAC,CAAC;gBAE9E,SAAS,CAAC,SAAS,EAAE,CAAC;gBACR,qBAAM,SAAS,CAAC,QAAQ,CAAC,SAAS,EAAE,EAAA;;gBAA5C,KAAK,GAAG,SAAoC;gBAClD,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBACV,qBAAM,UAAU,CAAC,QAAQ,CAAC,SAAS,EAAE,EAAA;;gBAA9C,MAAM,GAAG,SAAqC;gBACpD,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBAEzB,qBAAM,OAAO,CAAC,GAAG,CAAC;wBAChB,SAAS,CAAC,SAAS,CAAC,SAAS,EAAE;wBAC/B,UAAU,CAAC,SAAS,CAAC,SAAS,EAAE;qBACjC,CAAC,EAAA;;gBAHF,SAGE,CAAC;gBAEH,UAAU,CAAC;oBACT,SAAS,CAAC,MAAM,EAAE,CAAC;gBACrB,CAAC,CAAC,CAAC;gBACH,qBAAM,UAAU,CAAC,YAAY,CAAC,SAAS,EAAE,EAAA;;gBAAzC,SAAyC,CAAC;gBAE1C,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;;;KAC5B,EAAE,MAAO,CAAC,CAAC","sourcesContent":["import * as wrtc from \"wrtc\";\n\nimport WebRTC from \"..\";\n\ntest(\"close\", async () => {\n  const peerOffer = new WebRTC({ disable_stun: true, nodeId: \"offer\", wrtc });\n  const peerAnswer = new WebRTC({ disable_stun: true, nodeId: \"answer\", wrtc });\n\n  peerOffer.makeOffer();\n  const offer = await peerOffer.onSignal.asPromise();\n  peerAnswer.setSdp(offer);\n  const answer = await peerAnswer.onSignal.asPromise();\n  peerOffer.setSdp(answer);\n\n  await Promise.all([\n    peerOffer.onConnect.asPromise(),\n    peerAnswer.onConnect.asPromise()\n  ]);\n\n  setTimeout(() => {\n    peerOffer.hangUp();\n  });\n  await peerAnswer.onDisconnect.asPromise();\n\n  expect(true).toEqual(true);\n}, 600_000);\n"]}