{"version":3,"file":"trickle.test.js","sourceRoot":"","sources":["../../src/tests/trickle.test.ts"],"names":[],"mappings":";;;AAAA,2DAA8B;AAC9B,IAAM,SAAS,GAAG,IAAI,eAAM,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;AACjE,IAAM,UAAU,GAAG,IAAI,eAAM,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;AAEnE,IAAI,CAAC,SAAS,EAAE;IACd,SAAS,CAAC,SAAS,EAAE,CAAC;IACtB,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAC,GAAQ;QAC/B,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC;IACH,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAC,GAAQ;QAChC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACxB,CAAC,CAAC,CAAC;IAEH,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC;QACvB,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,UAAA,GAAG;YAC5B,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;QACH,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC;QACxB,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,UAAA,GAAG;YAC7B,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QACH,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC5B,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import WebRTC from \"../index\";\nconst peerOffer = new WebRTC({ nodeId: \"offer\", trickle: true });\nconst peerAnswer = new WebRTC({ nodeId: \"answer\", trickle: true });\n\ntest(\"trickle\", () => {\n  peerOffer.makeOffer();\n  peerOffer.onSignal.once((sdp: any) => {\n    peerAnswer.setSdp(sdp);\n  });\n  peerAnswer.onSignal.once((sdp: any) => {\n    peerOffer.setSdp(sdp);\n  });\n\n  peerOffer.onConnect.once(() => {\n    peerOffer.onData.subscribe(raw => {\n      expect(raw.data).toBe(\"answer\");\n    });\n    peerOffer.send(\"offer\");\n  });\n\n  peerAnswer.onConnect.once(() => {\n    peerAnswer.onData.subscribe(raw => {\n      expect(raw.data).toBe(\"offer\");\n    });\n    peerAnswer.send(\"answer\");\n  });\n});\n"]}