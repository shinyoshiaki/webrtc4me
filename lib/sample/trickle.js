"use strict";

var _trickle = _interopRequireDefault(require("../trickle"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

require("babel-polyfill");

var peerOffer = new _trickle.default({
  nodeId: "offer",
  trickle: true
});
var peerAnswer = new _trickle.default({
  nodeId: "answer",
  trickle: true
});
peerOffer.makeOffer();

peerOffer.signal = function (sdp) {
  if (!peerAnswer.isMadeAnswer) {
    peerAnswer.signal = function (sdp) {
      peerOffer.setSdp(sdp);
    };
  }

  peerAnswer.setSdp(sdp);
};

peerOffer.connect = function () {
  console.log("offer connect");
  peerOffer.addOnData(function (raw) {
    console.log("ondata offer", raw);
  }, "offer");
  peerOffer.send("one", "offer1");
  peerOffer.send("two", "offer2");
};

peerAnswer.connect = function () {
  console.log("answer connect");
  peerAnswer.addOnData(function (raw) {
    console.log("ondata answer", raw);
  }, "answer");
  peerAnswer.send("one", "answer1");
  peerAnswer.send("two", "answer2");
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zYW1wbGUvdHJpY2tsZS50cyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwicGVlck9mZmVyIiwiV2ViUlRDIiwibm9kZUlkIiwidHJpY2tsZSIsInBlZXJBbnN3ZXIiLCJtYWtlT2ZmZXIiLCJzaWduYWwiLCJzZHAiLCJpc01hZGVBbnN3ZXIiLCJzZXRTZHAiLCJjb25uZWN0IiwiY29uc29sZSIsImxvZyIsImFkZE9uRGF0YSIsInJhdyIsInNlbmQiXSwibWFwcGluZ3MiOiI7O0FBQ0E7Ozs7QUFEQUEsT0FBTyxDQUFDLGdCQUFELENBQVA7O0FBRUEsSUFBTUMsU0FBUyxHQUFHLElBQUlDLGdCQUFKLENBQVc7QUFBRUMsRUFBQUEsTUFBTSxFQUFFLE9BQVY7QUFBbUJDLEVBQUFBLE9BQU8sRUFBRTtBQUE1QixDQUFYLENBQWxCO0FBQ0EsSUFBTUMsVUFBVSxHQUFHLElBQUlILGdCQUFKLENBQVc7QUFBRUMsRUFBQUEsTUFBTSxFQUFFLFFBQVY7QUFBb0JDLEVBQUFBLE9BQU8sRUFBRTtBQUE3QixDQUFYLENBQW5CO0FBRUFILFNBQVMsQ0FBQ0ssU0FBVjs7QUFDQUwsU0FBUyxDQUFDTSxNQUFWLEdBQW1CLFVBQUNDLEdBQUQsRUFBYztBQUMvQixNQUFJLENBQUNILFVBQVUsQ0FBQ0ksWUFBaEIsRUFBOEI7QUFDNUJKLElBQUFBLFVBQVUsQ0FBQ0UsTUFBWCxHQUFvQixVQUFDQyxHQUFELEVBQWM7QUFDaENQLE1BQUFBLFNBQVMsQ0FBQ1MsTUFBVixDQUFpQkYsR0FBakI7QUFDRCxLQUZEO0FBR0Q7O0FBQ0RILEVBQUFBLFVBQVUsQ0FBQ0ssTUFBWCxDQUFrQkYsR0FBbEI7QUFDRCxDQVBEOztBQVNBUCxTQUFTLENBQUNVLE9BQVYsR0FBb0IsWUFBTTtBQUN4QkMsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksZUFBWjtBQUNBWixFQUFBQSxTQUFTLENBQUNhLFNBQVYsQ0FBb0IsVUFBQUMsR0FBRyxFQUFJO0FBQ3pCSCxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxjQUFaLEVBQTRCRSxHQUE1QjtBQUNELEdBRkQsRUFFRyxPQUZIO0FBR0FkLEVBQUFBLFNBQVMsQ0FBQ2UsSUFBVixDQUFlLEtBQWYsRUFBc0IsUUFBdEI7QUFDQWYsRUFBQUEsU0FBUyxDQUFDZSxJQUFWLENBQWUsS0FBZixFQUFzQixRQUF0QjtBQUNELENBUEQ7O0FBU0FYLFVBQVUsQ0FBQ00sT0FBWCxHQUFxQixZQUFNO0FBQ3pCQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxnQkFBWjtBQUNBUixFQUFBQSxVQUFVLENBQUNTLFNBQVgsQ0FBcUIsVUFBQUMsR0FBRyxFQUFJO0FBQzFCSCxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxlQUFaLEVBQTZCRSxHQUE3QjtBQUNELEdBRkQsRUFFRyxRQUZIO0FBR0FWLEVBQUFBLFVBQVUsQ0FBQ1csSUFBWCxDQUFnQixLQUFoQixFQUF1QixTQUF2QjtBQUNBWCxFQUFBQSxVQUFVLENBQUNXLElBQVgsQ0FBZ0IsS0FBaEIsRUFBdUIsU0FBdkI7QUFDRCxDQVBEIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZShcImJhYmVsLXBvbHlmaWxsXCIpO1xuaW1wb3J0IFdlYlJUQyBmcm9tIFwiLi4vdHJpY2tsZVwiO1xuY29uc3QgcGVlck9mZmVyID0gbmV3IFdlYlJUQyh7IG5vZGVJZDogXCJvZmZlclwiLCB0cmlja2xlOiB0cnVlIH0pO1xuY29uc3QgcGVlckFuc3dlciA9IG5ldyBXZWJSVEMoeyBub2RlSWQ6IFwiYW5zd2VyXCIsIHRyaWNrbGU6IHRydWUgfSk7XG5cbnBlZXJPZmZlci5tYWtlT2ZmZXIoKTtcbnBlZXJPZmZlci5zaWduYWwgPSAoc2RwOiBhbnkpID0+IHtcbiAgaWYgKCFwZWVyQW5zd2VyLmlzTWFkZUFuc3dlcikge1xuICAgIHBlZXJBbnN3ZXIuc2lnbmFsID0gKHNkcDogYW55KSA9PiB7XG4gICAgICBwZWVyT2ZmZXIuc2V0U2RwKHNkcCk7XG4gICAgfTtcbiAgfVxuICBwZWVyQW5zd2VyLnNldFNkcChzZHApO1xufTtcblxucGVlck9mZmVyLmNvbm5lY3QgPSAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwib2ZmZXIgY29ubmVjdFwiKTtcbiAgcGVlck9mZmVyLmFkZE9uRGF0YShyYXcgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwib25kYXRhIG9mZmVyXCIsIHJhdyk7XG4gIH0sIFwib2ZmZXJcIik7XG4gIHBlZXJPZmZlci5zZW5kKFwib25lXCIsIFwib2ZmZXIxXCIpO1xuICBwZWVyT2ZmZXIuc2VuZChcInR3b1wiLCBcIm9mZmVyMlwiKTtcbn07XG5cbnBlZXJBbnN3ZXIuY29ubmVjdCA9ICgpID0+IHtcbiAgY29uc29sZS5sb2coXCJhbnN3ZXIgY29ubmVjdFwiKTtcbiAgcGVlckFuc3dlci5hZGRPbkRhdGEocmF3ID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIm9uZGF0YSBhbnN3ZXJcIiwgcmF3KTtcbiAgfSwgXCJhbnN3ZXJcIik7XG4gIHBlZXJBbnN3ZXIuc2VuZChcIm9uZVwiLCBcImFuc3dlcjFcIik7XG4gIHBlZXJBbnN3ZXIuc2VuZChcInR3b1wiLCBcImFuc3dlcjJcIik7XG59O1xuIl19